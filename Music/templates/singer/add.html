{% extends 'base.html' %}
{% block bodytitle %}
    <span class="glyphicon glyphicon-user">添加歌手</span>

{% endblock %}
{% block content %}


            <hr>
            <form class="form-horizontal" method="post" action="{% url 'singer_add' %}">
              {% csrf_token %}
                <div class="form-group">
                <label  class="col-sm-2 control-label">姓名</label>
                <div class="col-sm-10">
                  <input name="name" id="name" type="text" class="form-control"  placeholder="请输入歌手姓名">
                </div>
              </div>

              <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit"  class="btn btn-default" id="btn" >添加</button>
                </div>
              </div>
            </form>

{#        <script>#}
{##}
{#    function add() {#}
{##}
{#        var name=$('#name').val();#}
{#        $.ajax({#}
{#                url:'http://192.168.1.200:8003/singer/add/',#}
{#                type:'post',#}
                {#dataType:'jsonp',#}
                {#contentType: 'application/json',#}
{#                data:{#}
{#                    'name':name,#}
                    {#'csrfmiddlewaretoken':'{{ csrf_token }}',#}
{#                },#}
{#                async:false,#}
{#                success:function (res) {#}
{#                    if(res['status']=='ok'){#}
{#                        console.log()#}
{#                        window.location="{% url 'base' %}";#}
{#                    }#}
{#                    else {#}
                        {#messages.info(request,res['info']);#}
{#                        window.location="{% url 'singer_add' %}?messages="+res['info'];#}
{#                    }#}
{##}
{#                },#}
{#                error:function (XMLHttpRequest, textStatus, errorThrown) {#}
{#                    alert('45');#}
                    {#messages.info(request,res['info']);#}
                    {#window.location="{% url 'base' %}";#}
{##}
{#                    console.log(XMLHttpRequest.status);#}
{#                    console.log(XMLHttpRequest.readyState);#}
{#                    console.log(textStatus);#}
                    {#alert()#}
{##}
{#                }#}
{#            })#}
{#    }#}
{#    </script>#}

{% endblock %}
